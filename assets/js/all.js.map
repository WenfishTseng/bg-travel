{"version":3,"sources":["all.js","my.js","revise.js"],"names":["$","console","log","newAry","elList","document","querySelector","ticketName","getElementById","ticketImgUrl","ticketArea","ticketPrice","ticketNum","ticketRate","ticketDes","addBtn","chooseArea","dataNum","alertModal","bootstrap","Modal","addEventListener","e","preventDefault","clearInputWarnings","checkInputData","target","value","selectAry","filter","item","renderData","elInputWarnings","querySelectorAll","forEach","remove","ticketData","trim","ary","times","key","hasOwnProperty","push","clearInputValue","show","newDiv","createElement","className","newSpan","textNodeError","createTextNode","appendChild","textNode","parentElement","reset","init","data","newData","id","name","imgUrl","area","price","group","rate","description","str","innerHTML","textContent","length","initAreaData","areaObj","areaAry","areaName","undefined","areaNameAry","Object","keys","renderDonutChart","chart","c3","generate","bindto","columns","type","color","pattern","donut","title","width","label","axios","get","then","response","axiosData","error"],"mappings":"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","file":"all.js","sourcesContent":["$(function () {\n  console.log(\"Hello Bootstrap5\");\n});\n","","let newAry = [];\r\nconst elList = document.querySelector(\".js-list\");\r\n\r\nconst ticketName = document.getElementById(\"ticketName\");\r\nconst ticketImgUrl = document.getElementById(\"ticketImgUrl\");\r\nconst ticketArea = document.getElementById(\"ticketArea\");\r\nconst ticketPrice = document.getElementById(\"ticketPrice\");\r\nconst ticketNum = document.getElementById(\"ticketNum\");\r\nconst ticketRate = document.getElementById(\"ticketRate\");\r\nconst ticketDes = document.getElementById(\"ticketDes\");\r\nconst addBtn = document.querySelector(\".js-add-btn\");\r\nconst chooseArea = document.querySelector(\".js-select-area\");\r\nconst dataNum = document.querySelector(\".js-num\");\r\nconst alertModal = new bootstrap.Modal(document.getElementById(\"myModal\"));\r\n\r\naddBtn.addEventListener(\"click\", (e) => {\r\n  e.preventDefault;\r\n  // 清除提示框空值警告\r\n  clearInputWarnings();\r\n  // 檢查提示框有無值\r\n  checkInputData();\r\n});\r\n\r\nchooseArea.addEventListener(\"change\", () => {\r\n  let target = chooseArea.value;\r\n  let selectAry = [];\r\n  if (target === \"\") return;\r\n  if (target === \"全部地區\") {\r\n    selectAry = newAry;\r\n  } else {\r\n    selectAry = newAry.filter((item) => {\r\n      return item.ticketArea === target;\r\n    });\r\n  }\r\n  renderData(selectAry);\r\n});\r\n\r\nfunction clearInputWarnings() {\r\n  const elInputWarnings = document.querySelectorAll(\".alert-message\");\r\n  elInputWarnings.forEach((item) => {\r\n    item.remove();\r\n  });\r\n}\r\n\r\nfunction checkInputData() {\r\n  let ticketData = {};\r\n  ticketData[\"ticketName\"] = ticketName.value;\r\n  ticketData[\"ticketImgUrl\"] = ticketImgUrl.value;\r\n  ticketData[\"ticketArea\"] = ticketArea.value;\r\n  ticketData[\"ticketPrice\"] = ticketPrice.value;\r\n  ticketData[\"ticketNum\"] = ticketNum.value;\r\n  ticketData[\"ticketRate\"] = ticketRate.value;\r\n  ticketData[\"ticketDes\"] = ticketDes.value.trim();\r\n  console.log(ticketData);\r\n  let ary = [];\r\n  let times = 0;\r\n  for (let key in ticketData) {\r\n    if (ticketData.hasOwnProperty(key)) {\r\n      // 將沒有寫入值的屬性放入陣列\r\n      if (ticketData[key] == \"\") {\r\n        console.log(\"沒有值: \" + key);\r\n        if (key !== \"ticketDes\") ary.push(key);\r\n      }\r\n    }\r\n    if (key !== \"ticketDes\" && ticketData[key] !== \"\") {\r\n      times += 1;\r\n    }\r\n  }\r\n  // 必輸入欄位都有值\r\n  if (times >= 6) {\r\n    newAry.push(ticketData);\r\n    renderData(newAry);\r\n    clearInputValue();\r\n    alertModal.show();\r\n  }\r\n\r\n  // 將陣列內的值拿出來放入getElement組html\r\n  ary.forEach((item) => {\r\n    let newDiv = document.createElement(\"div\");\r\n    newDiv.className =\r\n      \"alert-message text-danger d-flex align-items-center pt-1\";\r\n    let newSpan = document.createElement(\"span\");\r\n    newSpan.className = \"material-icons ps-1\";\r\n    let textNodeError = document.createTextNode(\"error\");\r\n    newSpan.appendChild(textNodeError);\r\n    newDiv.appendChild(newSpan);\r\n    let textNode = document.createTextNode(\"必填!\");\r\n    newDiv.appendChild(textNode);\r\n    document.getElementById(item).parentElement.appendChild(newDiv);\r\n  });\r\n}\r\n\r\nfunction clearInputValue() {\r\n  // 可以更為整個表格清空\r\n  document.getElementById(\"myForm\").reset();\r\n}\r\n\r\nfunction init(data) {\r\n  data.forEach((item) => {\r\n    let newData = {};\r\n    newData[\"ticketId\"] = item.id;\r\n    newData[\"ticketName\"] = item.name;\r\n    newData[\"ticketImgUrl\"] = item.imgUrl;\r\n    newData[\"ticketArea\"] = item.area;\r\n    newData[\"ticketPrice\"] = item.price;\r\n    newData[\"ticketNum\"] = item.group;\r\n    newData[\"ticketRate\"] = item.rate;\r\n    newData[\"ticketDes\"] = item.description;\r\n    newAry.push(newData);\r\n  });\r\n  renderData(newAry);\r\n}\r\n\r\nfunction renderData(data) {\r\n  let str = \"\";\r\n  data.forEach((item) => {\r\n    str += `\r\n            <li class=\"col-md-6 col-lg-4 mb-11\">\r\n            <div class=\"borderShadow card h-100 border-0 position-relative\">\r\n              <span\r\n                class=\"\r\n                  badge\r\n                  bg-secondary\r\n                  position-absolute\r\n                  top-0\r\n                  start-0\r\n                  translate-middle-y\r\n                  py-3\r\n                  px-7\r\n                  js-area\r\n                \"\r\n                style=\"font-size: 1.25rem\"\r\n                >${item.ticketArea}</span\r\n              >\r\n              <img\r\n                src=\"${item.ticketImgUrl}\"\r\n                class=\"card-img-top js-img\"\r\n                alt=\"photo-1\"\r\n              />\r\n              <div class=\"card-body position-relative pb-0\">\r\n                <span\r\n                  class=\"\r\n                    badge\r\n                    bg-primary\r\n                    position-absolute\r\n                    top-0\r\n                    start-0\r\n                    translate-middle-y\r\n                    py-1\r\n                    px-3\r\n                    fw-light\r\n                    js-rate\r\n                  \"\r\n                  style=\"font-size: 1rem\"\r\n                  >${item.ticketRate}</span\r\n                >\r\n                <h5\r\n                  class=\"\r\n                    card-title\r\n                    text-primary\r\n                    fw-medium\r\n                    border-bottom border-2 border-primary\r\n                    py-1\r\n                    h4\r\n                    js-title\r\n                  \"\r\n                >\r\n                  ${item.ticketName}\r\n                </h5>\r\n                <p class=\"card-text text-dark pt-6 fz-6 js-dis\">\r\n                 ${item.ticketDes} </p>\r\n              </div>\r\n              <div\r\n                class=\"\r\n                  card-footer\r\n                  d-flex\r\n                  text-primary\r\n                  justify-content-between\r\n                  mt-8\r\n                  py-0\r\n                  js-num\r\n                  bg-transparent border-0\r\n                \"\r\n              >\r\n                <p class=\"d-flex align-items-center\">\r\n                  <span class=\"material-icons me-2\"> error </span>\r\n                  剩下最後 ${item.ticketNum} 組\r\n                </p>\r\n                <p class=\"d-flex align-items-center\">\r\n                  TWD<span class=\"h2 js-price\">$${item.ticketPrice} </span>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </li>\r\n  `;\r\n  });\r\n  elList.innerHTML = str;\r\n  dataNum.textContent = data.length;\r\n}\r\n\r\nfunction initAreaData(data) {\r\n  let areaObj = {};\r\n  let areaAry = [];\r\n  data.forEach((item) => {\r\n    let areaName = item.area;\r\n    if (areaObj[areaName] == undefined) {\r\n      areaObj[areaName] = 1;\r\n    } else {\r\n      areaObj[areaName] += 1;\r\n    }\r\n  });\r\n\r\n  let areaNameAry = Object.keys(areaObj);\r\n  console.log(areaNameAry); // ['高雄', '台北', '台中']\r\n  areaNameAry.forEach((item) => {\r\n    let ary = [];\r\n    ary.push(item);\r\n    ary.push(areaObj[item]);\r\n    areaAry.push(ary);\r\n  });\r\n  console.log(\"areaAry\", areaAry);\r\n\r\n  // let areaAry = [\r\n  //   [\"data1\", 30],\r\n  //   [\"data2\", 120],\r\n  //   [\"data3\", 30],\r\n  // ];\r\n  renderDonutChart(areaAry);\r\n}\r\n\r\nfunction renderDonutChart(areaAry) {\r\n  let chart = c3.generate({\r\n    bindto: \"#chart\",\r\n    data: {\r\n      columns: areaAry,\r\n      type: \"donut\",\r\n    },\r\n    color: {\r\n      pattern: [\"#5151D3\", \"#E68618\", \"#26C0C7\"],\r\n    },\r\n    donut: {\r\n      title: \"套票地區比重\",\r\n      width: 20,\r\n      label: {\r\n        show: false,\r\n      },\r\n    },\r\n  });\r\n}\r\n\r\naxios\r\n  .get(\r\n    \"https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json\"\r\n  )\r\n  .then(function (response) {\r\n    // handle success\r\n    let axiosData = response.data.data;\r\n    init(axiosData);\r\n    initAreaData(axiosData);\r\n    console.log(\"獲取資料---\");\r\n  })\r\n  .catch((error) => {\r\n    console.error(error);\r\n  });\r\n"]}